<!DOCTYPE html>
<html lang='zh'>
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>

<meta charset="utf-8">
<i class="dark hidden"></i>
<title>
  
    
    
    
    
      结痂行会 | 化石与金属
    
  
</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<link rel="icon" href='/favicon-32x32.png'>


<link rel="stylesheet" href="/css/style.css">

<link href='/css/style.min.css' rel="stylesheet" type="text/css">
        
        <link rel="stylesheet" href="/css/main.css">
        
    </head>
    
    
    <body class="flex flex-col min-h-screen bg-flora dark:bg-warmgray-800">
    <header class="bg-rose text-white dark:bg-warmgray-900 dark:text-white" style="font-family: 'title'">
    <nav class="flex items-center justify-between flex-wrap p-4">
        <div class="flex items-center flex-shrink-0 text-2xl mx-6">
          
            <a href="http://localhost:1313/"><img src="/img/logo.webp" class="w-24 h-auto" /></a>
          
        </div>
        <div class="flex items-center">
            
            <div class="hidden md:block mr-4">
                
            </div>
            
            <button id="theme-toggle" class="focus:outline-none p-2" aria-label="切换日间/夜间模式">
                <i class="icon-moon text-xl" id="theme-icon"></i>
            </button>
        </div>
    </nav>
</header>

<script>

document.addEventListener('DOMContentLoaded', function() {
    const themeToggle = document.getElementById('theme-toggle');
    const themeIcon = document.getElementById('theme-icon');
    
    
    const getCurrentTheme = () => {
        if (localStorage.getItem('theme')) {
            return localStorage.getItem('theme');
        }
        return document.documentElement.classList.contains('dark') ? 'dark' : 'light';
    };
    
    
    const initTheme = () => {
        const currentTheme = getCurrentTheme();
        if (currentTheme === 'dark') {
            document.documentElement.classList.add('dark');
            themeIcon.classList.remove('icon-moon');
            themeIcon.classList.add('icon-sun'); 
        } else {
            document.documentElement.classList.remove('dark');
            themeIcon.classList.remove('icon-sun');
            themeIcon.classList.add('icon-moon');
        }
    };
    
    
    const toggleTheme = () => {
        const currentTheme = getCurrentTheme();
        if (currentTheme === 'dark') {
            document.documentElement.classList.remove('dark');
            localStorage.setItem('theme', 'light');
            themeIcon.classList.remove('icon-sun');
            themeIcon.classList.add('icon-moon');
        } else {
            document.documentElement.classList.add('dark');
            localStorage.setItem('theme', 'dark');
            themeIcon.classList.remove('icon-moon');
            themeIcon.classList.add('icon-sun');
        }
    };
    
    
    initTheme();
    
    
    if (themeToggle) {
        themeToggle.addEventListener('click', toggleTheme);
    }
    
    
    window.toggleDarkMode = toggleTheme;
});
</script><div class="container mx-auto max-w-7xl my-4 flex-grow" id="content">
<h2 class="text-4xl py-3 dark:text-white">#化石与金属</h2>








  




<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
  
  
  
</div>






<div class="mt-8">
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 items-start">
    
    <div class="lg:col-span-1">
      <div id="site-search" class="mx-3 my-3" style="max-width:24rem; width:100%;">
  
  <label for="search-input" class="search-label" style="display:block; margin-bottom:0.35rem; font-size:0.95rem;">
    搜索本站文章
  </label>

  <div class="relative">
    <input
      id="search-input"
      type="search"
      placeholder="搜索文章 / 标题 / 标签…"
      aria-label="搜索本站文章"
      autocomplete="off"
      class="w-full p-2 rounded border-0 border-b border-gray-200 text-base focus:outline-none"
      style="border-bottom-width:1px; border-color:var(--search-border-color);"
      disabled
    />
  </div>

  <div id="search-results" class="mt-2 w-full" role="list" aria-live="polite"></div>
</div>

<script>
 
(async function () {
  const INDEX_URL = '\/index.json';
  const input = document.getElementById('search-input');
  const resultsEl = document.getElementById('search-results');

  let fuse = null;
  let data = [];

  function loadScript(src) {
    return new Promise((resolve, reject) => {
      if (window.Fuse) return resolve();
      const s = document.createElement('script');
      s.src = src;
      s.async = true;
      s.onload = () => resolve();
      s.onerror = () => reject(new Error('加载脚本失败: ' + src));
      document.head.appendChild(s);
    });
  }

  try {
    const res = await fetch(INDEX_URL, { cache: 'no-store' });
    if (!res.ok) throw new Error(`索引读取失败（HTTP ${res.status}）`);
    data = await res.json();
    console.debug('[search] index.json 已加载，条目数:', Array.isArray(data) ? data.length : '(非数组)');
  } catch (err) {
    console.error('[search] 无法读取 index.json:', err);
    input.disabled = true;
    return;
  }

  try {
    if (!window.Fuse) {
      await loadScript('https://cdn.jsdelivr.net/npm/fuse.js@6.6.2/dist/fuse.min.js');
      console.debug('[search] Fuse.js 已加载');
    }
  } catch (err) {
    console.error('[search] 加载 Fuse.js 失败:', err);
    input.disabled = true;
    return;
  }

  try {
    fuse = new Fuse(data, {
      keys: [
        { name: "title", weight: 0.7 },
        { name: "tags", weight: 0.5 },
        { name: "summary", weight: 0.3 },
        { name: "content", weight: 0.2 }
      ],
      includeMatches: true,
      threshold: 0.32,
      minMatchCharLength: 2,
    });
    console.debug('[search] Fuse 初始化完成');
    input.disabled = false;
  } catch (err) {
    console.error('[search] 初始化 Fuse 失败:', err);
    input.disabled = true;
    return;
  }

  let debounceTimer = null;
  input.addEventListener('input', (e) => {
    clearTimeout(debounceTimer);
    debounceTimer = setTimeout(() => {
      const q = e.target.value.trim();
      if (!q) {
        resultsEl.innerHTML = '';
        return;
      }
      doSearch(q);
    }, 160);
  });

  input.addEventListener('keydown', (e) => {
    if (e.key === 'Enter') {
      const first = resultsEl.querySelector('a');
      if (first) window.location.href = first.href;
    }
  });

  function doSearch(query) {
    if (!fuse) return;
    try {
      const hits = fuse.search(query, { limit: 10 }) || [];
      if (hits.length === 0) {
        resultsEl.innerHTML = '<p class="text-gray-500 text-sm p-2">未找到结果</p>';
        return;
      }
      resultsEl.innerHTML = hits.map(renderHit).join('');
    } catch (err) {
      console.error('[search] 搜索错误:', err);
      resultsEl.innerHTML = '<p class="text-gray-500 text-sm p-2">搜索时出错（查看控制台）</p>';
    }
  }

  function highlightUsingMatches(text, matchesArray) {
    if (!text) return '';
    if (!matchesArray || matchesArray.length === 0) return escapeHtml(truncate(text, 200));
    try {
      const firstRange = Array.isArray(matchesArray[0][0]) ? matchesArray[0][0] : matchesArray[0];
      const start = Math.max(0, firstRange[0]);
      const end = Math.min(text.length - 1, firstRange[1]);
      const before = escapeHtml(text.slice(0, start));
      const match = escapeHtml(text.slice(start, end + 1));
      const after = escapeHtml(text.slice(end + 1));
      return truncate(before, 60) + '<mark class="search-mark">' + match + '</mark>' + truncate(after, 120);
    } catch (e) {
      return escapeHtml(truncate(text, 200));
    }
  }

  function renderHit(hit) {
    const item = hit.item || hit;
    const title = item.title || 'Untitled';
    const url = item.url || '#';
    const date = item.date ? (new Date(item.date)).toLocaleDateString() : '';
    let titleMatches = null, summaryMatches = null;
    if (hit.matches && Array.isArray(hit.matches)) {
      for (const m of hit.matches) {
        if (m.key === 'title') titleMatches = m.indices;
        if (m.key === 'summary' || m.key === 'content') summaryMatches = m.indices;
      }
    }
    const titleHtml = highlightUsingMatches(title, titleMatches);
    const summaryText = item.summary || item.content || '';
    const summaryHtml = highlightUsingMatches(truncate(summaryText, 220), summaryMatches);

    return `
      <article class="search-hit border-b border-gray-100 py-2">
        <a href="${url}" class="block p-2 no-underline transition duration-100 hover:bg-gray-100">
          <h3 class="text-base" style="margin:0; color:var(--search-title-color);">${titleHtml}</h3>
          <div class="text-xs" style="margin-top:6px; color:var(--search-date-color);">${escapeHtml(date)}</div>
          <p class="text-sm" style="margin:0.4rem 0 0; color:var(--search-summary-color);">${summaryHtml}</p>
        </a>
      </article>
    `;
  }

  function escapeHtml(s) {
    if (!s) return '';
    return String(s).replace(/[&<>"']/g, function (m) {
      return ({ '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;' }[m]);
    });
  }
  function truncate(s, n) {
    if (!s) return '';
    return s.length > n ? s.slice(0, n) + '…' : s;
  }

})();
</script>

<style>
:root {
  --search-input-color: #111827;
  --search-placeholder-color: #9ca3af;
  --search-border-color: #e5e7eb;
  --search-result-bg-hover: #f8fafc;
  --search-title-color: #111827;
  --search-summary-color: #374151;
  --search-date-color: #6b7280;
  --search-mark-bg: #fff2b0;
  --search-label-color: #374151;
}

 
.dark :root,
.dark {
  --search-input-color: #e5e7eb;
  --search-placeholder-color: #9ca3af;
  --search-border-color: #3A3A3A;
  --search-result-bg-hover: rgba(255,255,255,0.03);
  --search-title-color: #e5e7eb;
  --search-summary-color: #d1d5db;
  --search-date-color: #9ca3af;
  --search-mark-bg: #5b3b00;
  --search-label-color: #d1d5db;
}

 
.search-label {
  color: var(--search-label-color);
  font-weight: 600;
}

 
#site-search input {
  background: transparent;
  border-radius: 6px;
  border: 0;
  border-bottom: 1px solid var(--search-border-color);
  padding: 0.5rem 0.6rem;
  font-size: 1rem;
  color: var(--search-input-color);
  outline: none;
}

#site-search input::placeholder {
  color: var(--search-placeholder-color);
}

 
#search-results {
  background: transparent;
  margin-top: 0.25rem;
}

.search-hit a {
  color: inherit;
  display: block;
  border-radius: 6px;
  text-decoration: none;
}

.search-hit a:hover {
  background: var(--search-result-bg-hover);
}

.search-hit h3 { line-height: 1.2; color: var(--search-title-color); }
.search-hit p { color: var(--search-summary-color); }
.search-hit .text-xs { color: var(--search-date-color); }

 
.search-mark {
  background: var(--search-mark-bg);
  padding: 0 2px;
  border-radius: 2px;
  color: inherit;
}

 
#site-search input[type="search"]::-webkit-search-cancel-button {
  -webkit-appearance: none;
  appearance: none;
  height: 16px;
  width: 16px;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%239ca3af' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cline x1='18' y1='6' x2='6' y2='18'%3E%3C/line%3E%3Cline x1='6' y1='6' x2='18' y2='18'%3E%3C/line%3E%3C/svg%3E");
  background-size: 16px 16px;
  background-repeat: no-repeat;
  background-position: center;
  cursor: pointer;
  opacity: 0.7;
  transition: opacity 0.2s;
}

</style>


    </div>
    
    
    <div class="lg:col-span-1 flex flex-col items-center">
      <div class="home-banners">
  
  
  
  <div class="banner-item">
    <a href="/posts/links/" class="banner-link">
      <img src="/img/a.webp" alt="" class="banner-image">
      <div class="banner-overlay">
        <h3></h3>
        
      </div>
    </a>
  </div>
  
  <div class="banner-item">
    <a href="/posts/guestbook/" class="banner-link">
      <img src="/img/b.webp" alt="" class="banner-image">
      <div class="banner-overlay">
        <h3></h3>
        
      </div>
    </a>
  </div>
  
</div>
    </div>
  </div>
</div>


        </div><footer class="bg-rose text-white dark:bg-warmgray-900 dark:text-white pt-5 pb-5" style="font-family: 'title'">
  <div class="container mx-auto px-4">
    <p>&copy; <a href="http://localhost:1313/" class="hover:text-gray-500 duration-200">结痂行会</a></p>
  </div>
</footer>
<script>
  function toggleNav() {
      var hamburger = document.getElementById("hamburgerbtn");
      var overlay = document.getElementById("overlay");
      var body = document.body;

      hamburger.addEventListener("click", function () {
          overlay.classList.toggle("open");
          hamburger.classList.toggle("is-open");
          body.classList.toggle("scroll-lock");
      });
  }
  toggleNav();

  var icon = document.getElementById("icon");
  if (document.documentElement.classList.contains("dark") || localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      icon.classList.remove("icon-moon");
      icon.classList.add("icon-sun");
      document.documentElement.classList.add('dark')
  } else {
      document.documentElement.classList.remove('dark')
  }
  function toggleDarkMode() {
    if (document.documentElement.classList.contains('dark')) {
      icon.classList.remove("icon-sun");
      icon.classList.add("icon-moon");
      document.documentElement.classList.remove('dark')
      localStorage.theme = 'light'
    } else {
      icon.classList.remove("icon-moon");
      icon.classList.add("icon-sun");
      document.documentElement.classList.add('dark')
      localStorage.theme = 'dark'
    }
  }
</script>

</body>
</html>

